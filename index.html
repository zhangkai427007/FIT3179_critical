<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Greater Kuala Lumpur — Urban Rail Analysis</title>

  <!-- Vega / Vega-Lite / TopoJSON / Vega-Embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://unpkg.com/topojson-client@3/dist/topojson-client.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    body { font-family: Arial, sans-serif; margin: 28px; background:#f7f7f7; color:#111; }
    h1 { text-align:center; margin-bottom:12px; color:#1f4e79; }
    .section-title { text-align:center; margin-top:36px; margin-bottom:6px; font-size:1.2em; font-weight:bold; }
    .section-subtitle { text-align:center; margin-bottom:12px; font-style:italic; color:#333; }
    .vis { display:flex; justify-content:center; margin: 10px 0 30px; }
    .annotation { max-width:900px; margin: 0 auto 30px; font-size:14px; line-height:1.5em; color:#222; background:#fff; padding:12px; border-radius:6px; border:1px solid #ddd;}
  </style>
</head>
<body>

  <h1>Greater Kuala Lumpur — Rail Network Analysis</h1>

  <!-- 城镇地图 -->
  <div class="section-title">Urban Rail Network Map</div>
  <div class="section-subtitle">KL region rail density & urban distribution</div>
  <div class="vis" id="map_vis">Loading map…</div>
  <div class="annotation">
    The rail network in Kuala Lumpur is the densest in the metropolitan area. 
    Interestingly, the Petaling region has a dense rail network despite not being the most populous. 
    This suggests that urban rail development is uneven and may lack systematic planning across the Klang Valley.
  </div>

  <!-- 各线路客流量 -->
  <div class="section-title">Daily Rail Ridership — 2024</div>
  <div class="section-subtitle">Passenger volume per line</div>
  <div class="vis" id="ridership_vis">Loading ridership chart…</div>
  <div class="annotation">
    Ridership across lines is relatively stable. The LRT Kelana Jaya line carries the most passengers and passes through key areas of Kuala Lumpur, highlighting its importance in the network.
  </div>

  <!-- 拥车量 -->
  <div class="section-title">Vehicle Ownership Trends — KL Region</div>
  <div class="section-subtitle">Monthly vehicle counts per area</div>
  <div class="vis" id="vehicle_vis">Loading vehicle chart…</div>
  <div class="annotation">
    Vehicle ownership trends show gradual growth across the Kuala Lumpur metropolitan area. Monitoring vehicle density alongside rail ridership helps identify areas with potential traffic pressure.
  </div>

<script>
  // 城镇地图
  vegaEmbed('#map_vis', 'https://raw.githubusercontent.com/zhangkai427007/FIT3179_critical/main/urban-map-json', {
    renderer:'svg', actions:true
  }).then(res=>console.log('Map loaded')).catch(err=>console.error('Map error', err));

  // 客流量图
  vegaEmbed('#ridership_vis', 'https://raw.githubusercontent.com/zhangkai427007/fit3179_week10/main/ridership.json', {
    renderer:'svg', actions:true
  }).then(res=>console.log('Ridership chart loaded')).catch(err=>console.error('Ridership error', err));

  // 拥车量图
  vegaEmbed('#vehicle_vis', 'https://raw.githubusercontent.com/zhangkai427007/FIT3179_critical/main/vehicle.json', {
    renderer:'svg', actions:true
  }).then(res=>console.log('Vehicle chart loaded')).catch(err=>console.error('Vehicle error', err));

</script>
</body>
</html>


